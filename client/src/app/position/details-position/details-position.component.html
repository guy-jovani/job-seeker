



<app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

<div class="container">
  <app-message-box *ngIf="messages.length" [messages]="messages" (closeMessages)="onClose()"></app-message-box>
  <app-back-button *ngIf="!position"></app-back-button>
</div>

<div class="container" *ngIf="position && !isLoading">

  <div class="details-page-header">
    <h3 class="{{ status ? '' : 'only-position-title' }}">{{ (position.title || position['position'].title) | titlecase }}</h3>
    <h3 class="position-status" *ngIf="status">{{ status }}</h3>
    <app-back-button></app-back-button>
  </div>

  <p *ngIf="!allowEdit && companyLink; else companyNoLink">
    <a routerLink='company' (click)="getCompanyinfo()">
      Comapny: {{ (companyId.name | titlecase) }}
    </a>
  </p>
  <ng-template #companyNoLink><p>Comapny: {{ (companyId.name | titlecase) }}</p></ng-template>

  <p>Description: {{ position.description || position['position'].description }}</p>


  <p>Requierments:</p>
  <p *ngIf="!position.requirements || !position.requirements.length; else reqList">There are no prior requierments for this position.</p>
  <ng-template #reqList>
    <ul class="requirements-list" #reqList>
      <li class="requirements-list__item {{ currUrl[0] === 'positions' ? 'dddd' : 'fff' }}" *ngFor="let requirement of position.requirements">
        <p>{{ requirement.requirement | titlecase }}</p>
      </li>
    </ul>
  </ng-template>

  <hr>

  <div *ngIf="allowApply" class="status-buttons-container">
    <button class="btn btn-primary" (click)="onApplySave('saved')" *ngIf='status !== "saved"'>Save for Later</button>
    <button class="btn btn-success"
      (click)="onApplySave('applied')"
      *ngIf='status !== "accepted" && status !== "applied"'>
      Apply Now
    </button>
  </div>

  <div *ngIf="allowEdit" class="edit-buttons-container">
    <a class="btn btn-primary btn-sm" routerLink='edit'>Edit position</a>
  </div>
</div>










