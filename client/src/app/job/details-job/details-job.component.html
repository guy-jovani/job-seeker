



<app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

<div class="container" *ngIf="isLoading">
  <app-message-box *ngIf="messages.length && !isLoading" [messages]="messages" (closeMessages)="onClose()"></app-message-box>
  <app-back-button *ngIf="!job"></app-back-button>
</div>

<div class="container" *ngIf="job && !isLoading">

  <div class="details-page-header">
    <h3 class="{{ status ? '' : 'only-job-title' }}">{{ (job.title || job['job'].title) | titlecase }}</h3>
    <div class="status-info" *ngIf="status">
      <h3 class="job-status job-status-{{ status }}">{{ status }}</h3>
      <h4 class="job-date">{{ statusDate }}</h4>
    </div>
    <app-back-button></app-back-button>
  </div>

  <p *ngIf="!allowEdit && companyLink; else companyNoLink">
    <a routerLink='company' (click)="getCompanyinfo()">
      Comapny: {{ (companyId.name | titlecase) }}
    </a>
  </p>
  <ng-template #companyNoLink><p>Comapny: {{ (companyId.name | titlecase) }}</p></ng-template>

  <p>Description: {{ job.description || job['job'].description }}</p>
  <p>Date: {{ getJobDate(job.date) || getJobDate(job['job'].date) }}</p>


  <p>Requierments:</p>
  <p *ngIf="!job.requirements || !job.requirements.length; else reqList">There are no prior requierments for this job.</p>
  <ng-template #reqList>
    <ul class="requirements-list" #reqList>
      <li class="requirements-list__item" *ngFor="let requirement of job.requirements">
        <p>{{ requirement.requirement | titlecase }}</p>
      </li>
    </ul>
  </ng-template>

  <hr>

  <div *ngIf="allowApply" class="status-buttons-container">
    <button class="btn btn-primary" (click)="onApplySave('saved')" *ngIf='status !== "saved"'>Save for Later</button>
    <button class="btn btn-success"
      (click)="onApplySave('applied')"
      *ngIf='status !== "accepted" && status !== "applied"'>
      Apply Now
    </button>
  </div>

  <div *ngIf="allowEdit" class="edit-buttons-container">
    <a class="btn btn-primary btn-sm" routerLink='edit'>Edit job</a>
  </div>
</div>










